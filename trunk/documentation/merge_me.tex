 



\section{Project Outline}
%\begin{frame}{Motivation}
\begin{center}
\begin{itemize}
  \item Embedded communication for home automation are expensive
    \begin{itemize}
      \item Certification necessary
      \item Licence needed
      \item ...
    \end{itemize}
  \item Implementation of existing protocols are often resource intensive
  \item Migration of additional components in given systems needs expertise
\end{itemize}
\end{center}
%\end{frame}

\subsection{Project goals}
\begin{center}
\begin{itemize}
 \item \begin{large}Masterless\end{large}
 \item \begin{large}Up to 450m bus length\end{large}
 \item \begin{large}Usable for small microcontrollers\end{large}
 \item \begin{large}Low configuration overhead\end{large}
 \item \begin{large}Provide basic fault tolerance\end{large}
 \item \begin{large}Easily adaptable to existing projects\end{large}
 \item \begin{large}Easily migrateable from existing systems\end{large}
 \item \begin{large}Separation of communication and application layers\end{large}
\end{itemize}
\end{center}


\section{Group subject}
\subsection{Clock synchronisation}
  \begin{itemize}
    \item \begin{large}Comparison of clock synchronisation algorithms\end{large}
    \item \begin{large}Implementation of an algorithm including\end{large}
    \item \begin{large}Testing under fault conditions\end{large}
  \end{itemize}


\section{Bus Protocol}
\subsection{Layer 1}
\begin{center}
\begin{itemize}
 \item \begin{large}One wire\end{large}
 \item \begin{large}USART 9N1 configuration\end{large}
\end{itemize}
\vspace{1cm}
\begin{bytefield}{11}
 \bitheader{0-1,9-10}\\
 \bitbox{1}{S} \bitbox{9}{Datenbits} \bitbox{1}{S}\\
\end{bytefield}
\end{center}


\subsection{Layer 2}
\begin{center}
\begin{itemize}
  \item \begin{large}Bus tailored to our needs\end{large}
  \item \begin{large}Bus arbitration\end{large}
  \item \begin{large}CSMA/CA\end{large}
  \item \begin{large}Non-starvation handling\end{large}
  \item \begin{large}Re/integration handling\end{large}
\end{itemize}
\end{center}


\subsection{Layer 2: message format}
\begin{center}
   \begin{bytefield}{24}
     \bitheader{0,3-4,9-10,15-16,23}\\
     \bitbox{4}{Type} \bitbox{6}{Dest ID} \bitbox{6}{Src ID} \bitbox{8}{Len}\\
     \bitbox[lrt]{8}{Data<0>} \bitbox[lrt]{8}{Data<1>} \bitbox[lrt]{8}{..}\\ 
     \skippedwords \\
     \bitbox[lrb]{8}{..}\bitbox[lrb]{8}{Data<Len-2>}\bitbox[lrb]{8}{Data<Len-1>}\\
     \bitbox[lrb]{8}{CRC<0>}\bitbox{8}{..}\bitbox{8}{CRC<3>}\\
   \end{bytefield}
\end{center}


\subsection{Re/Integration handling}
\begin{center}
\begin{itemize}
 \item \begin{large}Problem: How does an upcoming node detect the beginning of a layer2 message?\end{large}
 \item \begin{large}Solution: ``Sync''-bit in layer1 set at beginning of a layer2-message.\end{large}
 \item \begin{large}Disadvantage: 1 additional bit for every layer1 message but lower cpu usage then bit stuffing and easier to implement.\end{large}
\end{itemize}
\end{center}


\subsection{Starvation handling}
\begin{center}
\begin{itemize}
 \item \begin{large}Problem: Sender stops sending during communication and receiver(s) will wait for data forever.\end{large}
 \item \begin{large}Solution: Receivers enter idle state again if no data has been received within the timeout interval.\end{large}
 \item \begin{large}Disadvantage: HW-Timer has to be used.\end{large}
\end{itemize}
\end{center}


\section{Clock Synchronisation}
\subsection{Clocks \& methods}
  \begin{center}
  \begin{itemize}
    \item \begin{large}Clock type\end{large}
    \begin{itemize}
      \item Centralized
      \item Distributed
    \end{itemize}
  \end{itemize}
  \end{center}


\subsection{Variations \& pitfalls}
\begin{center}
\begin{itemize}
  \item \begin{large}Assumption of timebase\end{large}
  \item \begin{large}Clock synchronisation vs. message ordering\end{large}
  \item \begin{large}Adjustment method\end{large}
  \item \begin{large}Latency correction\end{large}
\end{itemize}
\end{center}


\subsection{Outlook}
\begin{center}
    \begin{itemize}
      \item Real-time capability
      \item Variable baud rate
    \end{itemize}
\end{center}


